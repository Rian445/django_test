{% extends "base.html" %}
{% block title %}Professional Compound Interest Calculator{% endblock %}
{% block content %}

<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">Compound Interest Calculator</h3>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        <div class="form-group mb-3">
                            <label for="principle">Principal Amount ($)</label>
                            <input type="number" class="form-control" id="principle" name="principle" step="0.01"
                                min="0.01" value="{{ principle|default:'' }}" required>
                        </div>
                        <div class="form-group mb-3">
                            <label for="rate">Annual Interest Rate (%)</label>
                            <input type="number" class="form-control" id="rate" name="rate" step="0.01" min="0.01"
                                value="{{ rate|default:'' }}" required>
                        </div>
                        <div class="form-group mb-3">
                            <label for="time">Time Period (years)</label>
                            <input type="number" class="form-control" id="time" name="time" step="0.1" min="0.1"
                                value="{{ time|default:'' }}" required>
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg">Calculate</button>
                    </form>
                </div>
            </div>

            {% if error %}
            <div class="alert alert-danger mt-3">
                {{ error }}
            </div>
            {% endif %}

            {% if total_amount %}
            <div class="card mt-4">
                <div class="card-header bg-success text-white">
                    <h4 class="mb-0">Calculation Results</h4>
                </div>
                <div class="card-body">
                    <p><strong>Principal:</strong> ${{ principle|floatformat:2 }}</p>
                    <p><strong>Annual Rate:</strong> {{ rate|floatformat:2 }}%</p>
                    <p><strong>Time Period:</strong> {{ time|floatformat:0 }} years</p>
                    <p><strong>Future Value:</strong> ${{ total_amount }}</p>

                    {% if is_millionaire %}
                    <div class="alert alert-success">
                        <strong>Congratulations!</strong> You'll become a millionaire in {{ millionaire_time }} years!
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            {% if history %}
            <div class="card mt-4">
                <div class="card-header bg-info text-white">
                    <h4 class="mb-0">Calculation History</h4>
                </div>
                <div class="card-body">
                    {% for calculation in history %}
                    <div class="calculation-item border-bottom pb-2 mb-2">
                        <p><strong>P:</strong> ${{ calculation.principle|floatformat:2 }} |
                            <strong>R:</strong> {{ calculation.rate|floatformat:2 }}% |
                            <strong>T:</strong> {{ calculation.time }} years
                        </p>

                        <p><strong>Future Value:</strong> ${{ calculation.total_amount|floatformat:2 }}</p>

                        {% if calculation.millionaire_time %}
                        <p><strong>Millionaire in:</strong> {{ calculation.millionaire_time|floatformat:1 }} years</p>
                        {% endif %}

                        <small class="text-muted">Calculated on: {{ calculation.timestamp|date:"M d, Y H:i" }}</small>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}